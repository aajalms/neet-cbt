<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NEET PG CBT</title>

  <!-- Your CSS file -->
  <link rel="stylesheet" href="style.css" />

  <!-- Prevent text selection (optional) -->
  <style>
    body { -webkit-user-select:none; user-select:none; }
    input { -webkit-user-select:auto; user-select:auto; } /* keep radio usable */

    /* Submit overlay */
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.45);
      display:none; align-items:center; justify-content:center; z-index:9999;
      font-family:Arial;
    }
    .overlay .box{
      background:#fff; padding:18px 20px; border-radius:10px;
      width:min(360px, 92vw); box-shadow:0 10px 30px rgba(0,0,0,.2);
      text-align:center;
    }
    .overlay .box b{ display:block; margin-bottom:6px; }
    .overlay .small{ font-size:12px; color:#666; margin-top:6px; }
  </style>
</head>

<body>
  <!-- Submit overlay -->
  <div class="overlay" id="submitOverlay">
    <div class="box">
      <b>Submitting…</b>
      Please wait. Do not refresh or press back.
      <div class="small">Uploading result to Google Sheet (best effort).</div>
    </div>
  </div>

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="brand">NEET PG CBT</div>
    <div class="meta">
      <span>Time Left: <b id="timeLeft">03:00:00</b></span>
      <span class="sep">|</span>
      <span>Violations: <b id="violationsCount">0</b></span>
    </div>
  </header>

  <div class="container">
    <!-- LEFT: QUESTION AREA -->
    <main class="main">
      <div class="qhead">
        <h2 id="qNo">Question 1</h2>
        <div class="marking">Marking: <b>+4</b> / <b>-1</b> / <b>0</b></div>
      </div>

      <!-- Question text -->
      <div id="questionText" class="question">Loading question...</div>

      <!-- Options -->
      <div id="options" class="options"></div>

      <!-- Controls -->
      <div class="controls">
        <button id="btnPrev" class="btn light" type="button">Previous</button>
        <button id="btnClear" class="btn light" type="button">Clear Response</button>
        <button id="btnMark" class="btn warn" type="button">Mark for Review</button>
        <button id="btnSaveNext" class="btn primary" type="button">Save & Next</button>
      </div>

      <!-- Submit -->
      <button id="btnSubmit" class="btn danger submit" type="button">Submit</button>

      <!-- Proctoring note -->
      <div class="proctor-note" id="proctorNote">
        Proctoring ON: fullscreen + tab/app switch monitoring. Avoid leaving test screen.
      </div>
    </main>

    <!-- RIGHT: PALETTE -->
    <aside class="palette">
      <div class="legend">
        <div><span class="dot gray"></span> Not Visited</div>
        <div><span class="dot red"></span> Not Answered</div>
        <div><span class="dot green"></span> Answered</div>
        <div><span class="dot purple"></span> Answered & Marked</div>
        <div><span class="dot orange"></span> Marked (No Answer)</div>
        <div><span class="dot current"></span> Current</div>
      </div>

      <h3>Question Palette</h3>
      <div id="paletteGrid" class="palette-grid"></div>

      <div class="proctor-box">
        <h4>Proctoring</h4>
        <div class="small">
          Violations can auto-submit after limit. Use fullscreen.
        </div>
        <button id="btnFullscreen" class="btn light fullbtn" type="button">Enter Fullscreen</button>
      </div>
    </aside>
  </div>

  <!-- ✅ IMPORTANT: Script order MUST be exactly like this -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="questions.js"></script>
  <script src="script.js"></script>

  <!-- Small helper: disable double submit click -->
  <script>
    (function(){
      const subBtn = document.getElementById("btnSubmit");
      const overlay = document.getElementById("submitOverlay");
      if (!subBtn || !overlay) return;

      subBtn.addEventListener("click", () => {
        // show overlay immediately on click
        overlay.style.display = "flex";
        // disable button to prevent double click
        subBtn.disabled = true;
        subBtn.style.opacity = "0.7";
        subBtn.textContent = "Submitting...";
      });
    })();
  </script>
</body>
</html>
